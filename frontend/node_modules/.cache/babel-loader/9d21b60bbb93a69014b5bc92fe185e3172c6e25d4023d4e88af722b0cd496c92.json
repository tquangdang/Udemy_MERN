{"ast":null,"code":"import React,{useContext}from\"react\";import{useHistory}from\"react-router-dom\";import Input from\"../../shared/components/FormElements/Input\";import Button from\"../../shared/components/FormElements/Button\";import ErrorModal from\"../../shared/components/UIElements/ErrorModal\";import LoadingSpinner from\"../../shared/components/UIElements/LoadingSpinner\";import ImageUpload from\"../../shared/components/FormElements/ImageUpload\";import{VALIDATOR_MINLENGTH,VALIDATOR_REQUIRE}from\"../../shared/util/validators\";import{useForm}from\"../../shared/hooks/form-hook\";import{useHttpClient}from\"../../shared/hooks/http-hook\";import{AuthContext}from\"../../shared/context/auth-context\";import\"./PlaceForm.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const NewPlace=()=>{const auth=useContext(AuthContext);const{isLoading,error,sendRequest,clearError}=useHttpClient();const[formState,inputHandler]=useForm({title:{value:\"\",isValid:false},description:{value:\"\",isValid:false},address:{value:\"\",isValid:false},image:{value:null,isValid:false}},false);const history=useHistory();const placeSubmitHandler=async event=>{event.preventDefault();try{const formData=new FormData();formData.append(\"title\",formState.inputs.title.value);formData.append(\"description\",formState.inputs.description.value);formData.append(\"address\",formState.inputs.address.value);formData.append(\"image\",formState.inputs.image.value);await sendRequest(\"http://localhost:5000/api/places\",\"POST\",formData,{Authorization:'Bearer '+auth.token});history.push(\"/\");}catch(err){}};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/_jsxs(\"form\",{className:\"place-form\",onSubmit:placeSubmitHandler,children:[isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsx(Input,{id:\"title\",element:\"input\",type:\"text\",label:\"Title\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid title.\",onInput:inputHandler}),/*#__PURE__*/_jsx(Input,{id:\"description\",element:\"textarea\",label:\"Description\",validators:[VALIDATOR_MINLENGTH(5)],errorText:\"Please enter a valid description (at least 5 characters).\",onInput:inputHandler}),/*#__PURE__*/_jsx(Input,{id:\"address\",element:\"input\",label:\"Address\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid address.\",onInput:inputHandler}),/*#__PURE__*/_jsx(ImageUpload,{id:\"image\",onInput:inputHandler,errorText:\"Please provide an image.\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:!formState.isValid,children:\"ADD PLACE\"})]})]});};export default NewPlace;","map":{"version":3,"names":["React","useContext","useHistory","Input","Button","ErrorModal","LoadingSpinner","ImageUpload","VALIDATOR_MINLENGTH","VALIDATOR_REQUIRE","useForm","useHttpClient","AuthContext","jsx","_jsx","jsxs","_jsxs","NewPlace","auth","isLoading","error","sendRequest","clearError","formState","inputHandler","title","value","isValid","description","address","image","history","placeSubmitHandler","event","preventDefault","formData","FormData","append","inputs","Authorization","token","push","err","Fragment","children","onClear","className","onSubmit","asOverlay","id","element","type","label","validators","errorText","onInput","disabled"],"sources":["C:/Users/quang/Desktop/Udemy_MERN/frontend/src/places/pages/NewPlace.js"],"sourcesContent":["import React, { useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Input from \"../../shared/components/FormElements/Input\";\r\nimport Button from \"../../shared/components/FormElements/Button\";\r\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\r\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\r\nimport ImageUpload from \"../../shared/components/FormElements/ImageUpload\";\r\nimport {\r\n  VALIDATOR_MINLENGTH,\r\n  VALIDATOR_REQUIRE,\r\n} from \"../../shared/util/validators\";\r\nimport { useForm } from \"../../shared/hooks/form-hook\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\r\nimport { AuthContext } from \"../../shared/context/auth-context\";\r\nimport \"./PlaceForm.css\";\r\n\r\nconst NewPlace = () => {\r\n  const auth = useContext(AuthContext);\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n  const [formState, inputHandler] = useForm(\r\n    {\r\n      title: {\r\n        value: \"\",\r\n        isValid: false,\r\n      },\r\n      description: {\r\n        value: \"\",\r\n        isValid: false,\r\n      },\r\n      address: {\r\n        value: \"\",\r\n        isValid: false,\r\n      },\r\n      image: {\r\n        value: null,\r\n        isValid: false,\r\n      },\r\n    },\r\n    false\r\n  );\r\n\r\n  const history = useHistory();\r\n\r\n  const placeSubmitHandler = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"title\", formState.inputs.title.value);\r\n      formData.append(\"description\", formState.inputs.description.value);\r\n      formData.append(\"address\", formState.inputs.address.value);\r\n      formData.append(\"image\", formState.inputs.image.value);\r\n      await sendRequest(\"http://localhost:5000/api/places\", \"POST\", formData, {\r\n        Authorization: 'Bearer ' + auth.token\r\n      });\r\n      history.push(\"/\");\r\n    } catch (err) {}\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      <form className=\"place-form\" onSubmit={placeSubmitHandler}>\r\n        {isLoading && <LoadingSpinner asOverlay />}\r\n        <Input\r\n          id=\"title\"\r\n          element=\"input\"\r\n          type=\"text\"\r\n          label=\"Title\"\r\n          validators={[VALIDATOR_REQUIRE()]}\r\n          errorText=\"Please enter a valid title.\"\r\n          onInput={inputHandler}\r\n        />\r\n        <Input\r\n          id=\"description\"\r\n          element=\"textarea\"\r\n          label=\"Description\"\r\n          validators={[VALIDATOR_MINLENGTH(5)]}\r\n          errorText=\"Please enter a valid description (at least 5 characters).\"\r\n          onInput={inputHandler}\r\n        />\r\n        <Input\r\n          id=\"address\"\r\n          element=\"input\"\r\n          label=\"Address\"\r\n          validators={[VALIDATOR_REQUIRE()]}\r\n          errorText=\"Please enter a valid address.\"\r\n          onInput={inputHandler}\r\n        />\r\n        <ImageUpload\r\n          id=\"image\"\r\n          onInput={inputHandler}\r\n          errorText=\"Please provide an image.\"\r\n        />\r\n        <Button type=\"submit\" disabled={!formState.isValid}>\r\n          ADD PLACE\r\n        </Button>\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default NewPlace;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}