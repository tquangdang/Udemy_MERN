{"ast":null,"code":"import React,{useRef,useState,useEffect}from\"react\";import Button from\"./Button\";import\"./ImageUpload.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ImageUpload=props=>{const[file,setFile]=useState();const[previewUrl,setPreviewUrl]=useState();const[isValid,setIsValid]=useState(false);const filePickerRef=useRef();useEffect(()=>{if(!file){return;}const fileReader=new FileReader();fileReader.onload=()=>{setPreviewUrl(fileReader.result);};fileReader.readAsDataURL(file);},[file]);const pickedHandler=event=>{let pickedFile;let fileIsValid=isValid;if(event.target.files&&event.target.files.length===1){pickedFile=event.target.files[0];setFile(pickedFile);setIsValid(true);fileIsValid=true;}else{setIsValid(false);fileIsValid=false;}props.onInput(props.id,pickedFile,fileIsValid);};const pickImageHandler=()=>{filePickerRef.current.click();};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"input\",{id:props.id,ref:filePickerRef,style:{display:\"none\"},type:\"file\",accept:\".jpg,.png,.jpeg\",onChange:pickedHandler}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload \".concat(props.center&&\"center\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload__preview\",children:[previewUrl&&/*#__PURE__*/_jsx(\"img\",{src:previewUrl,alt:\"Preview\"}),!previewUrl&&/*#__PURE__*/_jsx(\"p\",{children:\"Please pick an image.\"})]}),/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:pickImageHandler,children:\"PICK IMAGE\"})]}),!isValid&&/*#__PURE__*/_jsx(\"p\",{children:props.errorText})]});};export default ImageUpload;","map":{"version":3,"names":["React","useRef","useState","useEffect","Button","jsx","_jsx","jsxs","_jsxs","ImageUpload","props","file","setFile","previewUrl","setPreviewUrl","isValid","setIsValid","filePickerRef","fileReader","FileReader","onload","result","readAsDataURL","pickedHandler","event","pickedFile","fileIsValid","target","files","length","onInput","id","pickImageHandler","current","click","className","children","ref","style","display","type","accept","onChange","concat","center","src","alt","onClick","errorText"],"sources":["C:/Users/quang/Desktop/Udemy_MERN/frontend/src/shared/components/FormElements/ImageUpload.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\n\r\nimport Button from \"./Button\";\r\nimport \"./ImageUpload.css\";\r\n\r\nconst ImageUpload = (props) => {\r\n  const [file, setFile] = useState();\r\n  const [previewUrl, setPreviewUrl] = useState();\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  const filePickerRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!file) {\r\n      return;\r\n    }\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      setPreviewUrl(fileReader.result);\r\n    }\r\n    fileReader.readAsDataURL(file)\r\n  }, [file])\r\n\r\n  const pickedHandler = (event) => {\r\n    let pickedFile;\r\n    let fileIsValid = isValid;\r\n    if (event.target.files && event.target.files.length === 1) {\r\n      pickedFile = event.target.files[0];\r\n      setFile(pickedFile);\r\n      setIsValid(true);\r\n      fileIsValid = true;\r\n    } else {\r\n      setIsValid(false);\r\n      fileIsValid = false;\r\n    }\r\n    props.onInput(props.id, pickedFile, fileIsValid);\r\n  };\r\n\r\n  const pickImageHandler = () => {\r\n    filePickerRef.current.click();\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-control\">\r\n      <input\r\n        id={props.id}\r\n        ref={filePickerRef}\r\n        style={{ display: \"none\" }}\r\n        type=\"file\"\r\n        accept=\".jpg,.png,.jpeg\"\r\n        onChange={pickedHandler}\r\n      />\r\n      <div className={`image-upload ${props.center && \"center\"}`}>\r\n        <div className=\"image-upload__preview\">\r\n          {previewUrl && <img src={previewUrl} alt=\"Preview\" />}\r\n          {!previewUrl && <p>Please pick an image.</p>}\r\n        </div>\r\n        <Button type=\"button\" onClick={pickImageHandler}>\r\n          PICK IMAGE\r\n        </Button>\r\n      </div>\r\n      {!isValid && <p>{props.errorText}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}